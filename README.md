# Weather project

## General information

Uses the Dark Sky API and database to get current weather and history. 

See documentation of API here: https://darksky.net/dev/docs
Here, a higher level set of functions is provided for easier handling of
data from the API.

Requires an account at Dark Sky, which provides an API key, except when
using data that has been already downloaded from DarkSky separately. Note that
the free version of the API is limited to 1000 requests per day.

## Functions 

See `examples.py` and `help(function)` for implementation.

To produce complete RAW data (dictionary corresponding to DarkSky .json file),
use the following functions:
- `generate_url` and copy-paste the link into a browser (returns url link)
- `download_day` to get the raw data from the internet (returns dict of data)
- `load_day` to get the raw data from downloaded files (returns dict of data)

To produce FORMATTED data for analysis and plotting, use the following:
- `weather_pt`  (returns a dict of values -- data at specific time)
- `weather_day` (returns a dict of lists -- hourly data)
- `weather_days` (returns a dict of lists -- hourly data)

To download a bunch of data from the internet and save in a file:
- `download_days` (saves RAW data in .json format in a folder, it is a threaded
version of download_day)
- `download_missing_days` (to run after download_days if some days have failed)
- the above function uses `check_missing_days`, which can also be used as a 
standalone function

To plot the data:
- `weather_plot`, with formatted data from `weather_day` or `weather_days`

## Notes

- If one gets the error `KeyError: 'hourly'`, it's likely that the data is not 
downloaded correctly or inexistent. Check that the api_key is correct and/or
test the download URL generated by `generate_url` in a browser.
- More data might be available compared to the ones returned by the functions
used here, see e.g. the raw dictionary returned by functions like load_day.

## Examples

See `examples.py` for examples of code.

The file `locations.py` is used to store coordinates of cities / locations

## Module requirements

- requests
- matplotlib
- pandas (something about date formatting and registration with matplotlib)

## Python requirements

- Python >= 3.6 because of f-string formatting
